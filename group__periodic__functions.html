<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Main loop functions</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; <a class="qindex" href="examples.html">Examples</a> &nbsp; </center>
<hr><h1>Main loop functions</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
This is a group of functions invoked usually from main loop to  perform period tasks for the TCP/IP stack and to manage data processing. They are not part of the API functions, but they must still be invoked by the user.
<p>
Not all of these functions must be invoked all the time in the main loop. Certain functions are only invoked when it is needed (IP, UDP and TCP processing for example). Check their individual documentation for detailed instructions on how to use them. <table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="group__periodic__functions.html#a7">NETWORK_CHECK_IF_RECEIVED</a>()&nbsp;&nbsp;&nbsp;NE2000ReceiveFrame()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Use this macro to check if there is recieved data in Ethernet controller.</em> <a href="#a7"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="group__periodic__functions.html#a8">NETWORK_RECEIVE_END</a>()&nbsp;&nbsp;&nbsp;NE2000DumpRxFrame()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Dump received packet in the Ethernet controller.</em> <a href="#a8"></a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__periodic__functions.html#a0">arp_manage</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Manage ARP cache periodically.</em> <a href="#a0"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__periodic__functions.html#a1">NE2000CheckOverFlow</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Check if receive-buffer overflow occured.</em> <a href="#a1"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>INT16&nbsp;</td><td valign=bottom><a class="el" href="group__periodic__functions.html#a2">process_icmp_in</a> (struct <a class="el" href="structip__frame.html">ip_frame</a> *frame, UINT16 len)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Process recieved ICMP datagram.</em> <a href="#a2"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>INT16&nbsp;</td><td valign=bottom><a class="el" href="group__periodic__functions.html#a3">process_ip_in</a> (struct <a class="el" href="structethernet__frame.html">ethernet_frame</a> *)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Process received IP frame.</em> <a href="#a3"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__periodic__functions.html#a4">tcp_poll</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Poll TCP sockets periodically.</em> <a href="#a4"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>INT16&nbsp;</td><td valign=bottom><a class="el" href="group__periodic__functions.html#a5">process_tcp_in</a> (struct <a class="el" href="structip__frame.html">ip_frame</a> *, UINT16)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Check and process the received TCP frame.</em> <a href="#a5"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>INT16&nbsp;</td><td valign=bottom><a class="el" href="group__periodic__functions.html#a6">process_udp_in</a> (struct <a class="el" href="structip__frame.html">ip_frame</a> *, UINT16)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Process received UDP frame.</em> <a href="#a6"></a><em></em></font><br><br></td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a name="a7" doxytag="system.h::NETWORK_CHECK_IF_RECEIVED"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NETWORK_CHECK_IF_RECEIVED</td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;NE2000ReceiveFrame()
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Invoke this macro periodically (see <a class="el" href="main__demo_8c.html">main_demo.c</a> for example) to check if there is new data in the Ethernet controller.
<p>
If there is new data in the Ethernet controller, this macro (function that it points to that is) will return a value of TRUE and fill in the appropriate values in the received_frame variable. Otherwise it returns FALSE. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="main__demo_8c-example.html#a10">main_demo.c</a>.</dl>
<p>
Definition at line <a class="el" href="system_8h-source.html#l00262">262</a> of file <a class="el" href="system_8h-source.html">system.h</a>.    </td>
  </tr>
</table>
<a name="a8" doxytag="system.h::NETWORK_RECEIVE_END"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NETWORK_RECEIVE_END</td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;NE2000DumpRxFrame()
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Invoke this macro when the received Ethernet packet is not needed any more and can be discarded. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="main__demo_8c-example.html#a16">main_demo.c</a>.</dl>
<p>
Definition at line <a class="el" href="system_8h-source.html#l00279">279</a> of file <a class="el" href="system_8h-source.html">system.h</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a0" doxytag="arp.c::arp_manage"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void arp_manage </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Jari Lahti (<a href="mailto:jari.lahti@violasystems.com">jari.lahti@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
04.11.2001 </dl><dl compact><dt><b>Warning: </b></dt><dd>
 <ul>
<li> Invoke this function periodically to ensure proper ARP cache behaviour</ul>
</dl>Iterate through ARP cache aging entries. If timed-out entry is found, remove it (dynamic address) or update it (static address). This function must be called periodically by the system. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="main__demo_8c-example.html#a18">main_demo.c</a>.</dl>
<p>
Definition at line <a class="el" href="arp_8c-source.html#l00785">785</a> of file <a class="el" href="arp_8c-source.html">arp.c</a>.
<p>
References <a class="el" href="arp_8h-source.html#l00195">ARP_FIXED_IP</a>, <a class="el" href="arp_8h-source.html#l00185">ARP_FREE</a>, <a class="el" href="arp_8h-source.html#l00187">ARP_PENDING</a>, <a class="el" href="arp_8h-source.html#l00189">ARP_REFRESHING</a>, <a class="el" href="arp_8h-source.html#l00117">ARP_RESEND</a>, <a class="el" href="arp_8h-source.html#l00188">ARP_RESOLVED</a>, <a class="el" href="arp_8c-source.html#l00390">arp_send_req()</a>, <a class="el" href="arp_8h-source.html#l00196">ARP_TEMP_IP</a>, <a class="el" href="arp_8h-source.html#l00102">ARP_TIMEOUT</a>, <a class="el" href="arp_8c-source.html#l00094">arp_timer</a>, <a class="el" href="timers_8c-source.html#l00233">check_timer()</a>, <a class="el" href="timers_8c-source.html#l00194">init_timer()</a>, <a class="el" href="arp_8h-source.html#l00179">arp_entry::pradr</a>, <a class="el" href="arp_8h-source.html#l00168">arp_entry::retries</a>, <a class="el" href="arp_8h-source.html#l00157">arp_entry::state</a>, <a class="el" href="timers_8h-source.html#l00086">TIMERTIC</a>, <a class="el" href="arp_8h-source.html#l00172">arp_entry::ttl</a>, and <a class="el" href="arp_8h-source.html#l00167">arp_entry::type</a>.    </td>
  </tr>
</table>
<a name="a1" doxytag="ethernet.c::NE2000CheckOverFlow"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void NE2000CheckOverFlow </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Jari Lahti (<a href="mailto:jari.lahti@violasystems.com">jari.lahti@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
19.02.2002</dl>This function checks if receive-buffer overflow has happened. If it did, NIC is reinitialized to ensure proper operation.
<p>
Invoke this function periodically to ensure proper operation under heavy load. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="main__demo_8c-example.html#a17">main_demo.c</a>.</dl>
<p>
Definition at line <a class="el" href="ethernet_8c-source.html#l00393">393</a> of file <a class="el" href="ethernet_8c-source.html">ethernet.c</a>.
<p>
References <a class="el" href="ethernet_8h-source.html#l00088">BOUNDARY</a>, <a class="el" href="ethernet_8h-source.html#l00085">CR</a>, <a class="el" href="ethernet_8h-source.html#l00113">CURR</a>, <a class="el" href="ethernet_8c-source.html#l00198">inNE2000()</a>, <a class="el" href="ethernet_8h-source.html#l00095">ISR</a>, <a class="el" href="ethernet_8c-source.html#l00080">NE2000CurrPktPtr</a>, <a class="el" href="ethernet_8c-source.html#l00079">NE2000NextPktPtr</a>, <a class="el" href="ethernet_8c-source.html#l00118">outNE2000()</a>, <a class="el" href="ethernet_8h-source.html#l00098">RBCR0</a>, and <a class="el" href="ethernet_8h-source.html#l00101">TCR</a>.    </td>
  </tr>
</table>
<a name="a2" doxytag="icmp.c::process_icmp_in"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT16 process_icmp_in </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structip__frame.html">ip_frame</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>frame</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT16&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>len</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Jari Lahti (<a href="mailto:jari.lahti@violasystems.com">jari.lahti@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
08.07.2002 </dl><dl compact><dt><b>Parameters: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>frame</em>&nbsp;</td><td>
- pointer to received IP frame structure </td></tr>
<tr><td valign=top><em>len</em>&nbsp;</td><td>
- length of the received IP datagram (in bytes) </td></tr>
</table>
</dl><dl compact><dt><b>Returns: </b></dt><dd>
 <ul>
<li> -1 - packet not OK (not proper ICMP or not ICMP at all) <li> &gt;=0 - packet OK</ul>
</dl>Invoke process_icmp_in whenever IP datagram containing ICMP message is detected (see <a class="el" href="main__demo_8c.html">main_demo.c</a> for example main loop implementing this).
<p>
This function simply checks correctnes of received ICMP message and send ICMP replies when requested. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="main__demo_8c-example.html#a13">main_demo.c</a>.</dl>
<p>
Definition at line <a class="el" href="icmp_8c-source.html#l00097">97</a> of file <a class="el" href="icmp_8c-source.html">icmp.c</a>.
<p>
References <a class="el" href="ip_8h-source.html#l00126">ip_frame::buf_index</a>, <a class="el" href="ip_8h-source.html#l00124">ip_frame::dip</a>, <a class="el" href="ip_8c-source.html#l00539">ip_checksum()</a>, <a class="el" href="ip_8c-source.html#l00582">ip_checksum_buf()</a>, <a class="el" href="ip_8h-source.html#l00072">IP_ICMP</a>, <a class="el" href="system_8h-source.html#l00270">NETWORK_RECEIVE_INITIALIZE</a>, <a class="el" href="system_8h-source.html#l00091">NETWORK_TX_BUFFER_SIZE</a>, <a class="el" href="ip_8c-source.html#l00300">process_ip_out()</a>, <a class="el" href="ip_8h-source.html#l00121">ip_frame::protocol</a>, <a class="el" href="system_8h-source.html#l00210">RECEIVE_NETWORK_B</a>, <a class="el" href="system_8h-source.html#l00220">RECEIVE_NETWORK_BUF</a>, <a class="el" href="ip_8h-source.html#l00123">ip_frame::sip</a>, and <a class="el" href="system_8h-source.html#l00151">TXBUF</a>.    </td>
  </tr>
</table>
<a name="a3" doxytag="ip.h::process_ip_in"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT16 process_ip_in </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structethernet__frame.html">ethernet_frame</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>frame</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Jari Lahti </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
11.06.2002 </dl><dl compact><dt><b>Parameters: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>frame</em>&nbsp;</td><td>
pointer to <a class="el" href="structethernet__frame.html">ethernet_frame</a> structure holding information about the received frame that carries IP datagram. </td></tr>
</table>
</dl><dl compact><dt><b>Returns: </b></dt><dd>
 <ul>
<li> -1 - IP packet not OK <li> &gt;0 - Length of next layer data (IP packet OK)</ul>
</dl>Process received IP packet by checking necessary header information and storing it accordingly to received_ip_packet variable. If everything checks out, return length of the data carried in the IP datagram (for higher-level protocols), otherwise return -1. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="main__demo_8c-example.html#a12">main_demo.c</a>.</dl>
<p>
Definition at line <a class="el" href="ip_8c-source.html#l00115">115</a> of file <a class="el" href="ip_8c-source.html">ip.c</a>.
<p>
References <a class="el" href="arp_8c-source.html#l00552">arp_add()</a>, <a class="el" href="arp_8h-source.html#l00196">ARP_TEMP_IP</a>, <a class="el" href="ethernet_8h-source.html#l00161">ethernet_frame::buf_index</a>, <a class="el" href="ip_8h-source.html#l00126">ip_frame::buf_index</a>, <a class="el" href="ip_8h-source.html#l00122">ip_frame::checksum</a>, <a class="el" href="ethernet_8h-source.html#l00144">ethernet_frame::destination</a>, <a class="el" href="ip_8h-source.html#l00124">ip_frame::dip</a>, <a class="el" href="ip_8h-source.html#l00119">ip_frame::frags</a>, <a class="el" href="ethernet_8h-source.html#l00152">ethernet_frame::frame_size</a>, <a class="el" href="ip_8h-source.html#l00118">ip_frame::id</a>, <a class="el" href="ip_8c-source.html#l00474">ip_check_cs()</a>, <a class="el" href="ip_8h-source.html#l00072">IP_ICMP</a>, <a class="el" href="system_8h-source.html#l00270">NETWORK_RECEIVE_INITIALIZE</a>, <a class="el" href="ip_8h-source.html#l00125">ip_frame::opt</a>, <a class="el" href="ip_8h-source.html#l00070">PHY_ADR_LEN</a>, <a class="el" href="ethernet_8h-source.html#l00155">ethernet_frame::protocol</a>, <a class="el" href="ip_8h-source.html#l00121">ip_frame::protocol</a>, <a class="el" href="ethernet_8h-source.html#l00080">PROTOCOL_IP</a>, <a class="el" href="system_8h-source.html#l00210">RECEIVE_NETWORK_B</a>, <a class="el" href="ip_8h-source.html#l00123">ip_frame::sip</a>, <a class="el" href="ethernet_8h-source.html#l00148">ethernet_frame::source</a>, <a class="el" href="ip_8h-source.html#l00117">ip_frame::tlen</a>, <a class="el" href="ip_8h-source.html#l00116">ip_frame::tos</a>, <a class="el" href="system_8h-source.html#l00078">TRUE</a>, <a class="el" href="ip_8h-source.html#l00120">ip_frame::ttl</a>, and <a class="el" href="ip_8h-source.html#l00115">ip_frame::vihl</a>.    </td>
  </tr>
</table>
<a name="a4" doxytag="tcp_ip.h::tcp_poll"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void tcp_poll </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Jari Lahti (<a href="mailto:jari.lahti@violasystems.com">jari.lahti@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
19.07.2002 </dl><dl compact><dt><b>Warning: </b></dt><dd>
 <ul>
<li> This function <b>must be</b> invoked periodically from  the main loop. See <a class="el" href="main__demo_8c.html">main_demo.c</a> for an example.</ul>
</dl>This function checks all TCP sockets and performs various actions  if timeouts occur. What kind of action is performed is defined by the state of the TCP socket. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="main__demo_8c-example.html#a19">main_demo.c</a>.</dl>
<p>
Definition at line <a class="el" href="tcp_8c-source.html#l00808">808</a> of file <a class="el" href="tcp_8c-source.html">tcp.c</a>.
<p>
References <a class="el" href="timers_8c-source.html#l00233">check_timer()</a>, <a class="el" href="structtcb.html#m16">tcb::event_listener</a>, <a class="el" href="tcp__ip_8h-source.html#l00622">tcb::flags</a>, <a class="el" href="timers_8c-source.html#l00194">init_timer()</a>, <a class="el" href="tcp__ip_8h-source.html#l00627">tcb::myflags</a>, <a class="el" href="tcp__ip_8h-source.html#l00633">tcb::persist_timerh</a>, <a class="el" href="tcp__ip_8h-source.html#l00623">tcb::rem_ip</a>, <a class="el" href="tcp__ip_8h-source.html#l00624">tcb::remport</a>, <a class="el" href="tcp__ip_8h-source.html#l00634">tcb::retransmit_timerh</a>, <a class="el" href="tcp__ip_8h-source.html#l00635">tcb::retries_left</a>, <a class="el" href="tcp__ip_8h-source.html#l00629">tcb::send_mtu</a>, <a class="el" href="tcp__ip_8h-source.html#l00628">tcb::send_next</a>, <a class="el" href="tcp__ip_8h-source.html#l00626">tcb::send_unacked</a>, <a class="el" href="tcp__ip_8h-source.html#l00609">tcb::state</a>, <a class="el" href="tcp__ip_8h-source.html#l00189">TCP_DEF_RETRY_TOUT</a>, <a class="el" href="tcp__ip_8h-source.html#l00418">TCP_EVENT_ABORT</a>, <a class="el" href="tcp__ip_8h-source.html#l00405">TCP_EVENT_CLOSE</a>, <a class="el" href="tcp__ip_8h-source.html#l00437">TCP_EVENT_REGENERATE</a>, <a class="el" href="tcp_8c-source.html#l02455">tcp_newstate()</a>, <a class="el" href="tcp_8c-source.html#l02253">tcp_sendcontrol()</a>, <a class="el" href="tcp__ip_8h-source.html#l00335">TCP_STATE_CLOSED</a>, <a class="el" href="tcp__ip_8h-source.html#l00353">TCP_STATE_CLOSING</a>, <a class="el" href="tcp__ip_8h-source.html#l00362">TCP_STATE_CONNECTED</a>, <a class="el" href="tcp__ip_8h-source.html#l00346">TCP_STATE_FINW1</a>, <a class="el" href="tcp__ip_8h-source.html#l00349">TCP_STATE_FINW2</a>, <a class="el" href="tcp__ip_8h-source.html#l00333">TCP_STATE_FREE</a>, <a class="el" href="tcp__ip_8h-source.html#l00356">TCP_STATE_LAST_ACK</a>, <a class="el" href="tcp__ip_8h-source.html#l00336">TCP_STATE_LISTENING</a>, <a class="el" href="tcp__ip_8h-source.html#l00334">TCP_STATE_RESERVED</a>, <a class="el" href="tcp__ip_8h-source.html#l00339">TCP_STATE_SYN_RECEIVED</a>, <a class="el" href="tcp__ip_8h-source.html#l00343">TCP_STATE_SYN_SENT</a>, <a class="el" href="tcp__ip_8h-source.html#l00359">TCP_STATE_TIMED_WAIT</a>, <a class="el" href="tcp__ip_8h-source.html#l00206">TCP_SYN_RETRY_TOUT</a>, <a class="el" href="tcp__ip_8h-source.html#l00310">TCP_TYPE_SERVER</a>, <a class="el" href="timers_8h-source.html#l00086">TIMERTIC</a>, and <a class="el" href="tcp__ip_8h-source.html#l00621">tcb::type</a>.    </td>
  </tr>
</table>
<a name="a5" doxytag="tcp_ip.h::process_tcp_in"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT16 process_tcp_in </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structip__frame.html">ip_frame</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>frame</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT16&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>len</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Jari Lahti (<a href="mailto:jari.lahti@violasystems.com">jari.lahti@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
12.07.2002 </dl><dl compact><dt><b>Parameters: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>frame</em>&nbsp;</td><td>
pointer to received <a class="el" href="structip__frame.html">ip_frame</a> structure </td></tr>
<tr><td valign=top><em>len</em>&nbsp;</td><td>
length of data contained in IP datagram (in bytes) </td></tr>
</table>
</dl><dl compact><dt><b>Returns: </b></dt><dd>
 <ul>
<li> -1 - Error (packet not OK, or not TCP,or something else) <li> &gt;0 - Packet OK</ul>
</dl>Invoke this function to process received TCP frames. See <a class="el" href="main__demo_8c.html">main_demo.c</a> for an example on how to accomplish this. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="main__demo_8c-example.html#a15">main_demo.c</a>.</dl>
<p>
Definition at line <a class="el" href="tcp_8c-source.html#l01250">1250</a> of file <a class="el" href="tcp_8c-source.html">tcp.c</a>.
<p>
References <a class="el" href="tcp__ip_8h-source.html#l00569">tcp_frame::ackno</a>, <a class="el" href="ip_8h-source.html#l00126">ip_frame::buf_index</a>, <a class="el" href="tcp__ip_8h-source.html#l00575">tcp_frame::buf_index</a>, <a class="el" href="tcp__ip_8h-source.html#l00572">tcp_frame::checksum</a>, <a class="el" href="tcp__ip_8h-source.html#l00567">tcp_frame::dport</a>, <a class="el" href="structtcb.html#m16">tcb::event_listener</a>, <a class="el" href="tcp__ip_8h-source.html#l00622">tcb::flags</a>, <a class="el" href="tcp__ip_8h-source.html#l00570">tcp_frame::hlen_flags</a>, <a class="el" href="ip_8h-source.html#l00074">IP_TCP</a>, <a class="el" href="tcp__ip_8h-source.html#l00627">tcb::myflags</a>, <a class="el" href="system_8h-source.html#l00270">NETWORK_RECEIVE_INITIALIZE</a>, <a class="el" href="tcp__ip_8h-source.html#l00574">tcp_frame::opt</a>, <a class="el" href="ip_8h-source.html#l00121">ip_frame::protocol</a>, <a class="el" href="system_8h-source.html#l00210">RECEIVE_NETWORK_B</a>, <a class="el" href="tcp__ip_8h-source.html#l00632">tcb::receive_next</a>, <a class="el" href="tcp__ip_8h-source.html#l00623">tcb::rem_ip</a>, <a class="el" href="tcp__ip_8h-source.html#l00624">tcb::remport</a>, <a class="el" href="system_8h-source.html#l00163">RESET_SYSTEM</a>, <a class="el" href="tcp__ip_8h-source.html#l00628">tcb::send_next</a>, <a class="el" href="tcp__ip_8h-source.html#l00626">tcb::send_unacked</a>, <a class="el" href="tcp__ip_8h-source.html#l00568">tcp_frame::seqno</a>, <a class="el" href="ip_8h-source.html#l00123">ip_frame::sip</a>, <a class="el" href="tcp__ip_8h-source.html#l00566">tcp_frame::sport</a>, <a class="el" href="tcp__ip_8h-source.html#l00609">tcb::state</a>, <a class="el" href="tcp_8c-source.html#l02567">tcp_check_cs()</a>, <a class="el" href="tcp__ip_8h-source.html#l00418">TCP_EVENT_ABORT</a>, <a class="el" href="tcp__ip_8h-source.html#l00428">TCP_EVENT_ACK</a>, <a class="el" href="tcp__ip_8h-source.html#l00405">TCP_EVENT_CLOSE</a>, <a class="el" href="tcp__ip_8h-source.html#l00397">TCP_EVENT_CONNECTED</a>, <a class="el" href="tcp__ip_8h-source.html#l00387">TCP_EVENT_CONREQ</a>, <a class="el" href="tcp__ip_8h-source.html#l00445">TCP_EVENT_DATA</a>, <a class="el" href="tcp_8c-source.html#l02346">tcp_initseq()</a>, <a class="el" href="tcp_8c-source.html#l02369">tcp_mapsocket()</a>, <a class="el" href="tcp_8c-source.html#l02455">tcp_newstate()</a>, <a class="el" href="tcp_8c-source.html#l02253">tcp_sendcontrol()</a>, <a class="el" href="tcp_8c-source.html#l02294">tcp_sendreset()</a>, <a class="el" href="tcp__ip_8h-source.html#l00335">TCP_STATE_CLOSED</a>, <a class="el" href="tcp__ip_8h-source.html#l00353">TCP_STATE_CLOSING</a>, <a class="el" href="tcp__ip_8h-source.html#l00362">TCP_STATE_CONNECTED</a>, <a class="el" href="tcp__ip_8h-source.html#l00346">TCP_STATE_FINW1</a>, <a class="el" href="tcp__ip_8h-source.html#l00349">TCP_STATE_FINW2</a>, <a class="el" href="tcp__ip_8h-source.html#l00333">TCP_STATE_FREE</a>, <a class="el" href="tcp__ip_8h-source.html#l00356">TCP_STATE_LAST_ACK</a>, <a class="el" href="tcp__ip_8h-source.html#l00336">TCP_STATE_LISTENING</a>, <a class="el" href="tcp__ip_8h-source.html#l00339">TCP_STATE_SYN_RECEIVED</a>, <a class="el" href="tcp__ip_8h-source.html#l00343">TCP_STATE_SYN_SENT</a>, <a class="el" href="tcp__ip_8h-source.html#l00359">TCP_STATE_TIMED_WAIT</a>, <a class="el" href="tcp__ip_8h-source.html#l00310">TCP_TYPE_SERVER</a>, <a class="el" href="tcp__ip_8h-source.html#l00621">tcb::type</a>, <a class="el" href="tcp__ip_8h-source.html#l00573">tcp_frame::urgent</a>, and <a class="el" href="tcp__ip_8h-source.html#l00571">tcp_frame::window</a>.    </td>
  </tr>
</table>
<a name="a6" doxytag="tcp_ip.h::process_udp_in"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT16 process_udp_in </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structip__frame.html">ip_frame</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>frame</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT16&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>len</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Jari Lahti (<a href="mailto:jari.lahti@violasystems.com">jari.lahti@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
15.07.2002 </dl><dl compact><dt><b>Parameters: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>frame</em>&nbsp;</td><td>
pointer to received IP frame structure </td></tr>
<tr><td valign=top><em>len</em>&nbsp;</td><td>
length of data in bytes </td></tr>
</table>
</dl><dl compact><dt><b>Returns: </b></dt><dd>
 <ul>
<li> -1 - Error (packet not UDP, header errror or no socket for it) <li> &gt;0 - Packet OK</ul>
</dl>Invoke this function to process received UDP frames. See <a class="el" href="main__demo_8c.html">main_demo.c</a> for an example on how to accomplish this. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="main__demo_8c-example.html#a14">main_demo.c</a>.</dl>
<p>
Definition at line <a class="el" href="udp_8c-source.html#l00550">550</a> of file <a class="el" href="udp_8c-source.html">udp.c</a>.
<p>
References <a class="el" href="ip_8h-source.html#l00126">ip_frame::buf_index</a>, <a class="el" href="tcp__ip_8h-source.html#l00494">udp_frame::buf_index</a>, <a class="el" href="tcp__ip_8h-source.html#l00493">udp_frame::checksum</a>, <a class="el" href="ip_8h-source.html#l00124">ip_frame::dip</a>, <a class="el" href="tcp__ip_8h-source.html#l00491">udp_frame::dport</a>, <a class="el" href="ip_8c-source.html#l00539">ip_checksum()</a>, <a class="el" href="ip_8h-source.html#l00073">IP_UDP</a>, <a class="el" href="tcp__ip_8h-source.html#l00525">ucb::locport</a>, <a class="el" href="system_8h-source.html#l00270">NETWORK_RECEIVE_INITIALIZE</a>, <a class="el" href="tcp__ip_8h-source.html#l00539">ucb::opts</a>, <a class="el" href="ip_8h-source.html#l00121">ip_frame::protocol</a>, <a class="el" href="system_8h-source.html#l00210">RECEIVE_NETWORK_B</a>, <a class="el" href="ip_8h-source.html#l00123">ip_frame::sip</a>, <a class="el" href="tcp__ip_8h-source.html#l00490">udp_frame::sport</a>, <a class="el" href="tcp__ip_8h-source.html#l00516">ucb::state</a>, <a class="el" href="tcp__ip_8h-source.html#l00492">udp_frame::tlen</a>, <a class="el" href="tcp__ip_8h-source.html#l00276">UDP_EVENT_DATA</a>, <a class="el" href="tcp__ip_8h-source.html#l00144">UDP_HLEN</a>, <a class="el" href="tcp__ip_8h-source.html#l00140">UDP_OPT_CHECK_CS</a>, and <a class="el" href="tcp__ip_8h-source.html#l00266">UDP_STATE_OPENED</a>.    </td>
  </tr>
</table>
<hr><address style="align: right;"><small>Generated on Sun Aug 3 20:33:01 2003 for OpenTCP by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
