<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>http_server.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; <a class="qindex" href="examples.html">Examples</a> &nbsp; </center>
<hr><h1>/opentcp/include/inet/http/http_server.h File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
 <dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Jari Lahti (<a href="mailto:jari.lahti@violasystems.com">jari.lahti@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Version: </b></dt><dd>
1.0 </dl><dl compact><dt><b>Date: </b></dt><dd>
13.10.2002</dl>OpenTCP HTTP function declarations, constants, etc.
<p>

<p>
Definition in file <a class="el" href="http__server_8h-source.html">http_server.h</a>.
<p>
<a href="http__server_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Data Structures</h2></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><a class="el" href="structhttp__server__state.html">http_server_state</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Structure that holds all the necessary state information for session management.</em> <a href="structhttp__server__state.html#_details">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="http__server_8h.html#a0">NO_OF_HTTP_SESSIONS</a>&nbsp;&nbsp;&nbsp;3</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Defines number of simultaneous HTTP sessions.</em> <a href="#a0"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="http__server_8h.html#a1">HTTPS_SERVERPORT</a>&nbsp;&nbsp;&nbsp;80</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>HTTP server port on which we'll listen.</em> <a href="#a1"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="http__server_8h.html#a2">HTTPS_STATE_FREE</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="http__server_8h.html#a3">HTTPS_STATE_RESERVED</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="http__server_8h.html#a4">HTTPS_STATE_ACTIVE</a>&nbsp;&nbsp;&nbsp;3</td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>INT8&nbsp;</td><td valign=bottom><a class="el" href="http__server_8h.html#a7">https_init</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Initialize HTTP server variables.</em> <a href="#a7"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>INT16&nbsp;</td><td valign=bottom><a class="el" href="http__server_8h.html#a14">https_findfile</a> (UINT8, UINT8)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Brief function description here.</em> <a href="#a14"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>INT16&nbsp;</td><td valign=bottom><a class="el" href="http__server_8h.html#a15">https_loadbuffer</a> (UINT8, UINT8 *, UINT16)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Fill network transmit buffer with HTTP headers&amp;data.</em> <a href="#a15"></a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="structhttp__server__state.html">http_server_state</a>&nbsp;</td><td valign=bottom><a class="el" href="http__server_8h.html#a5">https</a> []</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Used for storing state information about different HTTP sessions.</em> <a href="#a5"></a><em></em></font><br><br></td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a name="a0" doxytag="http_server.h::NO_OF_HTTP_SESSIONS"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NO_OF_HTTP_SESSIONS&nbsp;&nbsp;&nbsp;3
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Change this define to change how many simultaneous HTTP sessions will be possible at any given time. Note that this will require at least as much TCP sockets, so change <a class="el" href="group__opentcp__config.html#a5">NO_OF_TCPSOCKETS</a> also! 
<p>
Definition at line <a class="el" href="http__server_8h-source.html#l00075">75</a> of file <a class="el" href="http__server_8h-source.html">http_server.h</a>.    </td>
  </tr>
</table>
<a name="a1" doxytag="http_server.h::HTTPS_SERVERPORT"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HTTPS_SERVERPORT&nbsp;&nbsp;&nbsp;80
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This defines on what TCP port the HTTP server will listen for incoming connections/requests. For HTTP standard port is 80. 
<p>
Definition at line <a class="el" href="http__server_8h-source.html#l00083">83</a> of file <a class="el" href="http__server_8h-source.html">http_server.h</a>.
<p>
Referenced by <a class="el" href="http__server_8c-source.html#l00093">https_init()</a>.    </td>
  </tr>
</table>
<a name="a2" doxytag="http_server.h::HTTPS_STATE_FREE"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HTTPS_STATE_FREE&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
HTTP Server state: session entry free and available 
<p>
Definition at line <a class="el" href="http__server_8h-source.html#l00086">86</a> of file <a class="el" href="http__server_8h-source.html">http_server.h</a>.
<p>
Referenced by <a class="el" href="http__server_8c-source.html#l00093">https_init()</a>.    </td>
  </tr>
</table>
<a name="a3" doxytag="http_server.h::HTTPS_STATE_RESERVED"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HTTPS_STATE_RESERVED&nbsp;&nbsp;&nbsp;2
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
HTTP Server state: session entry is reserved and therefore not available 
<p>
Definition at line <a class="el" href="http__server_8h-source.html#l00089">89</a> of file <a class="el" href="http__server_8h-source.html">http_server.h</a>.    </td>
  </tr>
</table>
<a name="a4" doxytag="http_server.h::HTTPS_STATE_ACTIVE"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define HTTPS_STATE_ACTIVE&nbsp;&nbsp;&nbsp;3
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
HTTP Server state: session entry (and the session itself) are active. 
<p>
Definition at line <a class="el" href="http__server_8h-source.html#l00092">92</a> of file <a class="el" href="http__server_8h-source.html">http_server.h</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a7" doxytag="http_server.h::https_init"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT8 https_init </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Jari Lahti (<a href="mailto:jari.lahti@violasysems.com">jari.lahti@violasysems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
13.10.2002</dl>This function should be called before the HTTP Server application is used to set the operating parameters of it 
<p>
Definition at line <a class="el" href="http__server_8c-source.html#l00093">93</a> of file <a class="el" href="http__server_8c-source.html">http_server.c</a>.
<p>
References <a class="el" href="http__server_8h-source.html#l00137">http_server_state::flen</a>, <a class="el" href="http__server_8h-source.html#l00144">http_server_state::fpoint</a>, <a class="el" href="http__server_8h-source.html#l00130">http_server_state::fstart</a>, <a class="el" href="http__server_8h-source.html#l00154">http_server_state::funacked</a>, <a class="el" href="http__server_8c-source.html#l00075">https_enabled</a>, <a class="el" href="http__server_8h-source.html#l00083">HTTPS_SERVERPORT</a>, <a class="el" href="http__server_8h-source.html#l00086">HTTPS_STATE_FREE</a>, <a class="el" href="http__server_8h-source.html#l00120">http_server_state::ownersocket</a>, <a class="el" href="system_8h-source.html#l00163">RESET_SYSTEM</a>, <a class="el" href="http__server_8h-source.html#l00113">http_server_state::state</a>, <a class="el" href="tcp__ip_8h-source.html#l00225">TCP_DEF_TOUT</a>, <a class="el" href="tcp_8c-source.html#l00155">tcp_getsocket()</a>, <a class="el" href="tcp_8c-source.html#l00290">tcp_listen()</a>, <a class="el" href="tcp__ip_8h-source.html#l00214">TCP_TOS_NORMAL</a>, and <a class="el" href="tcp__ip_8h-source.html#l00310">TCP_TYPE_SERVER</a>.    </td>
  </tr>
</table>
<a name="a14" doxytag="http_server.h::https_findfile"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT16 https_findfile </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT8&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>hash</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT8&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ses</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Jari Lahti (<a href="mailto:jari.lahti@violasystems.com">jari.lahti@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
09.10.2002 </dl><dl compact><dt><b>Parameters: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>hash</em>&nbsp;</td><td>
Calculated file-name hash value. Used so that the whole file name doesn't need to be stored in RAM </td></tr>
<tr><td valign=top><em>ses</em>&nbsp;</td><td>
HTTP session identifier </td></tr>
</table>
</dl><dl compact><dt><b>Returns: </b></dt><dd>
 <ul>
<li> -1 - This function should return -1 if no file has been found <li> 1 - This function should return 1 if a file with appropriate hash value has been found. </ul>
</dl><dl compact><dt><b>Warning: </b></dt><dd>
 <ul>
<li> This function <b>MUST</b> be implemented by user application to work with local configuration</ul>
</dl>This function is invoked by the HTTP server once a hash value of a  requested file name has been calculated. User application uses this hash value to check if appropriate file is available to web server. Appropriate https session entry is then filled accordingly. 
<p>
Definition at line <a class="el" href="https__callbacks_8c-source.html#l00124">124</a> of file <a class="el" href="https__callbacks_8c-source.html">https_callbacks.c</a>.    </td>
  </tr>
</table>
<a name="a15" doxytag="http_server.h::https_loadbuffer"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT16 https_loadbuffer </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT8&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ses</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT8 *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>buf</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT16&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>buflen</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Jari Lahti (<a href="mailto:jari.lahti@violasystems.com">jari.lahti@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
09.10.2002 </dl><dl compact><dt><b>Parameters: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>ses</em>&nbsp;</td><td>
HTTP session identifier </td></tr>
<tr><td valign=top><em>buf</em>&nbsp;</td><td>
Pointer to buffer where data is to be stored </td></tr>
<tr><td valign=top><em>buflen</em>&nbsp;</td><td>
Length of the buffer in bytes </td></tr>
</table>
</dl><dl compact><dt><b>Returns: </b></dt><dd>
 <ul>
<li> &gt;=0 - Number of bytes written to buffer </ul>
</dl><dl compact><dt><b>Warning: </b></dt><dd>
 <ul>
<li> This function <b>MUST</b> be implemented by user application to work with local configuration</ul>
</dl>This handlers' job is to fill the buffer with the data that web server should return back through the TCP connection. This is accomplished based session identifer and values of variables in appropriate https entry. 
<p>
Definition at line <a class="el" href="https__callbacks_8c-source.html#l00173">173</a> of file <a class="el" href="https__callbacks_8c-source.html">https_callbacks.c</a>.
<p>
References <a class="el" href="https__callbacks_8c-source.html#l00081">https_not_found_page</a>.    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a name="a5" doxytag="http_server.h::https"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> struct <a class="el" href="structhttp__server__state.html">http_server_state</a> https[] </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This is an array of <a class="el" href="structhttp__server__state.html">http_server_state</a> structures holding various state  information about the HTTP sessions. HTTP server uses this information to determine actions that need to be taken on sockets. 
<p>
Definition at line <a class="el" href="http__server_8h-source.html#l00158">158</a> of file <a class="el" href="http__server_8h-source.html">http_server.h</a>.    </td>
  </tr>
</table>
<hr><address style="align: right;"><small>Generated on Sun Aug 3 20:33:00 2003 for OpenTCP by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
