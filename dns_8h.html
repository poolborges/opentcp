<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>dns.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; <a class="qindex" href="examples.html">Examples</a> &nbsp; </center>
<hr><h1>/opentcp/include/inet/dns/dns.h File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
 <dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Vladan Jovanovic (<a href="mailto:vladan.jovanovic@violasystems.com">vladan.jovanovic@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Version: </b></dt><dd>
1.0 </dl><dl compact><dt><b>Date: </b></dt><dd>
10.9.2002</dl>OpenTCP DNS protocol function declarations, constants, etc.
<p>

<p>
Definition in file <a class="el" href="dns_8h-source.html">dns.h</a>.
<p>
<a href="dns_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a0">DNS_UDP_PORT</a>&nbsp;&nbsp;&nbsp;53</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a1">DNS_SERVER_IP</a>&nbsp;&nbsp;&nbsp;0xac100201</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a2">DNS_RESEND_PERIOD</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a3">DNS_NUM_RETRIES</a>&nbsp;&nbsp;&nbsp;5</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a4">DNS_EVENT_ERROR</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a5">DNS_EVENT_SUCCESS</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a6">DNS_ERROR_FORMAT</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a7">DNS_ERROR_SERVER_FAILURE</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a8">DNS_ERROR_NAME_ERROR</a>&nbsp;&nbsp;&nbsp;3</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a9">DNS_ERROR_NOT_IMPLEMENTED</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a10">DNS_ERROR_REFUSED</a>&nbsp;&nbsp;&nbsp;5</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a11">DNS_ERROR_TIMEOUT</a>&nbsp;&nbsp;&nbsp;16</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a12">DNS_ERROR_GENERAL</a>&nbsp;&nbsp;&nbsp;17</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a13">DNS_ERROR_BUSY</a>&nbsp;&nbsp;&nbsp;-4</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a14">DNS_ERROR_LABEL</a>&nbsp;&nbsp;&nbsp;-5</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a15">DNS_ERROR_NAME</a>&nbsp;&nbsp;&nbsp;-6</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a16">DNS_ERROR_OVERFLOW</a>&nbsp;&nbsp;&nbsp;-7</td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>UINT8&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a17">get_host_by_name</a> (UINT8 *host_name_ptr, void(*listener)(UINT8, UINT32))</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Invokes DNS resolver.</em> <a href="#a17"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a18">dns_init</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Initialize resources needed for the DNS client.</em> <a href="#a18"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a19">dns_run</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>DNS client main loop.</em> <a href="#a19"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>INT32&nbsp;</td><td valign=bottom><a class="el" href="dns_8h.html#a20">dns_eventlistener</a> (INT8, UINT8, UINT32, UINT16, UINT16, UINT16)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>DNS client event listener.</em> <a href="#a20"></a><em></em></font><br><br></td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a name="a0" doxytag="dns.h::DNS_UDP_PORT"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_UDP_PORT&nbsp;&nbsp;&nbsp;53
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
DNS client will use this port  for sending and receiving of DNS packets 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00069">69</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.
<p>
Referenced by <a class="el" href="dns_8c-source.html#l00108">dns_init()</a>, and <a class="el" href="dns_8c-source.html#l00445">get_host_by_name()</a>.    </td>
  </tr>
</table>
<a name="a1" doxytag="dns.h::DNS_SERVER_IP"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_SERVER_IP&nbsp;&nbsp;&nbsp;0xac100201
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
DNS server's IP address 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00073">73</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.
<p>
Referenced by <a class="el" href="dns_8c-source.html#l00445">get_host_by_name()</a>.    </td>
  </tr>
</table>
<a name="a2" doxytag="dns.h::DNS_RESEND_PERIOD"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_RESEND_PERIOD&nbsp;&nbsp;&nbsp;2
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Period in seconds for resending DNS requests 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00075">75</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.
<p>
Referenced by <a class="el" href="dns_8c-source.html#l00142">dns_retransmit()</a>, and <a class="el" href="dns_8c-source.html#l00445">get_host_by_name()</a>.    </td>
  </tr>
</table>
<a name="a3" doxytag="dns.h::DNS_NUM_RETRIES"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_NUM_RETRIES&nbsp;&nbsp;&nbsp;5
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Number of retries that DNS client will perform before aborting name resolving 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00078">78</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.
<p>
Referenced by <a class="el" href="dns_8c-source.html#l00445">get_host_by_name()</a>.    </td>
  </tr>
</table>
<a name="a4" doxytag="dns.h::DNS_EVENT_ERROR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_EVENT_ERROR&nbsp;&nbsp;&nbsp;0
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Error event reported by DNS  client to event_listener 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00084">84</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.
<p>
Referenced by <a class="el" href="dns_8c-source.html#l00205">dns_eventlistener()</a>, and <a class="el" href="dns_8c-source.html#l00142">dns_retransmit()</a>.    </td>
  </tr>
</table>
<a name="a5" doxytag="dns.h::DNS_EVENT_SUCCESS"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_EVENT_SUCCESS&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Resolving successfull event reported by DNS client to  event_listener 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00087">87</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.
<p>
Referenced by <a class="el" href="dns_8c-source.html#l00205">dns_eventlistener()</a>.    </td>
  </tr>
</table>
<a name="a6" doxytag="dns.h::DNS_ERROR_FORMAT"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_ERROR_FORMAT&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The name server was unable to  interpret the query (RFC1035) 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00095">95</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.    </td>
  </tr>
</table>
<a name="a7" doxytag="dns.h::DNS_ERROR_SERVER_FAILURE"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_ERROR_SERVER_FAILURE&nbsp;&nbsp;&nbsp;2
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The name server was unable to process this query due to a problem with the name server (RFC1035) 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00098">98</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.    </td>
  </tr>
</table>
<a name="a8" doxytag="dns.h::DNS_ERROR_NAME_ERROR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_ERROR_NAME_ERROR&nbsp;&nbsp;&nbsp;3
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Meaningful only for responses from an authoritative name server, this code signifies that the domain name referenced in the query does not exist (RFC1035) 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00103">103</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.    </td>
  </tr>
</table>
<a name="a9" doxytag="dns.h::DNS_ERROR_NOT_IMPLEMENTED"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_ERROR_NOT_IMPLEMENTED&nbsp;&nbsp;&nbsp;4
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The name server does not support the requested kind of query (RFC1035) 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00110">110</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.    </td>
  </tr>
</table>
<a name="a10" doxytag="dns.h::DNS_ERROR_REFUSED"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_ERROR_REFUSED&nbsp;&nbsp;&nbsp;5
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The name server refuses to perform the specified operation for policy reasons. (RFC 1035) 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00114">114</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.    </td>
  </tr>
</table>
<a name="a11" doxytag="dns.h::DNS_ERROR_TIMEOUT"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_ERROR_TIMEOUT&nbsp;&nbsp;&nbsp;16
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Timeout occured while DNS was trying to resolve the host name. New request should be issued if the address is needed 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00119">119</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.
<p>
Referenced by <a class="el" href="dns_8c-source.html#l00142">dns_retransmit()</a>.    </td>
  </tr>
</table>
<a name="a12" doxytag="dns.h::DNS_ERROR_GENERAL"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_ERROR_GENERAL&nbsp;&nbsp;&nbsp;17
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
General (not specific) error occured while resolving host name. 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00124">124</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.
<p>
Referenced by <a class="el" href="dns_8c-source.html#l00205">dns_eventlistener()</a>.    </td>
  </tr>
</table>
<a name="a13" doxytag="dns.h::DNS_ERROR_BUSY"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_ERROR_BUSY&nbsp;&nbsp;&nbsp;-4
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returned from <a class="el" href="dns_8h.html#a17">get_host_by_name()</a>: DNS client is currently busy with another request and is unable the process a new one 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00135">135</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.
<p>
Referenced by <a class="el" href="dns_8c-source.html#l00445">get_host_by_name()</a>.    </td>
  </tr>
</table>
<a name="a14" doxytag="dns.h::DNS_ERROR_LABEL"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_ERROR_LABEL&nbsp;&nbsp;&nbsp;-5
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returned from <a class="el" href="dns_8h.html#a17">get_host_by_name()</a>: Part  of the host name (label) consists of more than 63 characters. 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00140">140</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.    </td>
  </tr>
</table>
<a name="a15" doxytag="dns.h::DNS_ERROR_NAME"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_ERROR_NAME&nbsp;&nbsp;&nbsp;-6
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returned from <a class="el" href="dns_8h.html#a17">get_host_by_name()</a>: Host name too long (more than 263 bytes) 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00144">144</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.    </td>
  </tr>
</table>
<a name="a16" doxytag="dns.h::DNS_ERROR_OVERFLOW"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DNS_ERROR_OVERFLOW&nbsp;&nbsp;&nbsp;-7
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
net_buf too small for the entire  DNS request to be stored in it. 
<p>
Definition at line <a class="el" href="dns_8h-source.html#l00147">147</a> of file <a class="el" href="dns_8h-source.html">dns.h</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a17" doxytag="dns.h::get_host_by_name"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> UINT8 get_host_by_name </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">UINT8 *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>host_name_ptr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>void(*&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>listener</em>)(UINT8, UINT32)</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Vladan Jovanovic (<a href="mailto:vladan.jovanovic@violasystems.com">vladan.jovanovic@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
10.10.2002 </dl><dl compact><dt><b>Parameters: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>host_name_ptr</em>&nbsp;</td><td>
Pointer to null-terminated host name to be resolved </td></tr>
<tr><td valign=top><em>listener</em>&nbsp;</td><td>
Pointer to DNS listener function that listens to events from DNS client. This function takes two parameters: first one can take a value of <a class="el" href="dns_8h.html#a5">DNS_EVENT_SUCCESS</a> or <a class="el" href="dns_8h.html#a4">DNS_EVENT_ERROR</a> and thus determine the meaning of the second parameter. If first parameter is <a class="el" href="dns_8h.html#a5">DNS_EVENT_SUCCESS</a>, second parameter represents requested IP address. In case of <a class="el" href="dns_8h.html#a4">DNS_EVENT_ERROR</a>, second parameter can be one of the: <a class="el" href="dns_8h.html#a6">DNS_ERROR_FORMAT</a>, <a class="el" href="dns_8h.html#a7">DNS_ERROR_SERVER_FAILURE</a>, <a class="el" href="dns_8h.html#a8">DNS_ERROR_NAME_ERROR</a>, <a class="el" href="dns_8h.html#a9">DNS_ERROR_NOT_IMPLEMENTED</a>, <a class="el" href="dns_8h.html#a10">DNS_ERROR_REFUSED</a>, <a class="el" href="dns_8h.html#a11">DNS_ERROR_TIMEOUT</a>, <a class="el" href="dns_8h.html#a12">DNS_ERROR_GENERAL</a> </td></tr>
</table>
</dl><dl compact><dt><b>Returns: </b></dt><dd>
 <ul>
<li> <a class="el" href="dns_8h.html#a13">DNS_ERROR_BUSY</a> - Signals that DNS is currently processing another request so it is not possible to process a new one <li> <a class="el" href="dns_8h.html#a16">DNS_ERROR_OVERFLOW</a> - Network transmit buffer too small to hold DNS request <li> <a class="el" href="dns_8h.html#a14">DNS_ERROR_LABEL</a> - Label in host name longer than 63 bytes. Error <li> <a class="el" href="dns_8h.html#a15">DNS_ERROR_NAME</a> - Host name longer than 264 bytes. Error</ul>
</dl>Invoke this function to start name-resolving process. Note that currently DNS client can process only one request at a time and will not allow multiple requests. 
<p>
Definition at line <a class="el" href="dns_8c-source.html#l00445">445</a> of file <a class="el" href="dns_8c-source.html">dns.c</a>.
<p>
References <a class="el" href="dns_8h-source.html#l00135">DNS_ERROR_BUSY</a>, <a class="el" href="dns_8c-source.html#l00095">dns_hostptr</a>, <a class="el" href="dns_8h-source.html#l00078">DNS_NUM_RETRIES</a>, <a class="el" href="dns_8h-source.html#l00075">DNS_RESEND_PERIOD</a>, <a class="el" href="dns_8c-source.html#l00091">dns_retries</a>, <a class="el" href="dns_8h-source.html#l00073">DNS_SERVER_IP</a>, <a class="el" href="dns_8c-source.html#l00089">dns_socket</a>, <a class="el" href="dns_8c-source.html#l00088">dns_state</a>, <a class="el" href="dns_8c-source.html#l00090">dns_timer</a>, <a class="el" href="dns_8c-source.html#l00093">dns_tmp_ip</a>, <a class="el" href="dns_8h-source.html#l00069">DNS_UDP_PORT</a>, <a class="el" href="timers_8c-source.html#l00194">init_timer()</a>, <a class="el" href="system_8h-source.html#l00091">NETWORK_TX_BUFFER_SIZE</a>, <a class="el" href="system_8h-source.html#l00163">RESET_SYSTEM</a>, <a class="el" href="timers_8h-source.html#l00086">TIMERTIC</a>, <a class="el" href="tcp__ip_8h-source.html#l00471">UDP_APP_OFFSET</a>, and <a class="el" href="udp_8c-source.html#l00395">udp_send()</a>.
<p>
Referenced by <a class="el" href="dns_8c-source.html#l00142">dns_retransmit()</a>.    </td>
  </tr>
</table>
<a name="a18" doxytag="dns.h::dns_init"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void dns_init </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Vladan Jovanovic (<a href="mailto:vladan.jovanovic@violasystems.com">vladan.jovanovic@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
10.10.2002</dl>Invoke this function at startup to properly initialize DNS resources. 
<p>
Definition at line <a class="el" href="dns_8c-source.html#l00108">108</a> of file <a class="el" href="dns_8c-source.html">dns.c</a>.
<p>
References <a class="el" href="dns_8c-source.html#l00205">dns_eventlistener()</a>, <a class="el" href="dns_8c-source.html#l00089">dns_socket</a>, <a class="el" href="dns_8c-source.html#l00088">dns_state</a>, <a class="el" href="dns_8c-source.html#l00090">dns_timer</a>, <a class="el" href="dns_8h-source.html#l00069">DNS_UDP_PORT</a>, <a class="el" href="timers_8c-source.html#l00131">get_timer()</a>, <a class="el" href="udp_8c-source.html#l00175">udp_getsocket()</a>, <a class="el" href="udp_8c-source.html#l00291">udp_open()</a>, <a class="el" href="tcp__ip_8h-source.html#l00140">UDP_OPT_CHECK_CS</a>, and <a class="el" href="tcp__ip_8h-source.html#l00132">UDP_OPT_SEND_CS</a>.    </td>
  </tr>
</table>
<a name="a19" doxytag="dns.h::dns_run"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void dns_run </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Vladan Jovanovic (<a href="mailto:vladan.jovanovic@violasystems.com">vladan.jovanovic@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
10.10.2002</dl>Simple main loop that checks whether DNS requests should be sent or not (based on timer timeout). If yes, and DNS is in appropriate state, <a class="el" href="dns_8c.html#a11">dns_retransmit()</a> function is invoked. 
<p>
Definition at line <a class="el" href="dns_8c-source.html#l00168">168</a> of file <a class="el" href="dns_8c-source.html">dns.c</a>.
<p>
References <a class="el" href="timers_8c-source.html#l00233">check_timer()</a>, <a class="el" href="dns_8c-source.html#l00142">dns_retransmit()</a>, <a class="el" href="dns_8c-source.html#l00088">dns_state</a>, and <a class="el" href="dns_8c-source.html#l00090">dns_timer</a>.    </td>
  </tr>
</table>
<a name="a20" doxytag="dns.h::dns_eventlistener"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> INT32 dns_eventlistener </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">INT8&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>cbhandle</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT8&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>event</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT32&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ipaddr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT16&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>port</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT16&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>buffindex</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>UINT16&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>datalen</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Author: </b></dt><dd>
 <ul>
<li> Vladan Jovanovic (<a href="mailto:vladan.jovanovic@violasystems.com">vladan.jovanovic@violasystems.com</a>) </ul>
</dl><dl compact><dt><b>Date: </b></dt><dd>
10.10.2002 </dl><dl compact><dt><b>Parameters: </b></dt><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>cbhandle</em>&nbsp;</td><td>
handle of the socket this packet is intended for. </td></tr>
<tr><td valign=top><em>event</em>&nbsp;</td><td>
event that is notified. For UDP, only UDP_EVENT_DATA. </td></tr>
<tr><td valign=top><em>ipaddr</em>&nbsp;</td><td>
IP address of remote host who sent the UDP datagram </td></tr>
<tr><td valign=top><em>port</em>&nbsp;</td><td>
port number of remote host who sent the UDP datagram </td></tr>
<tr><td valign=top><em>buffindex</em>&nbsp;</td><td>
buffer index in RTL8019AS </td></tr>
</table>
</dl><dl compact><dt><b>Returns: </b></dt><dd>
 <ul>
<li> - 1 - error in processing <li> 0 - DNS reply successfully processed </ul>
</dl><dl compact><dt><b>Note: </b></dt><dd>
 <ul>
<li> Event listeners are NOT to be invoked directly. They are callback functions invoked by the TCP/IP stack to notify events.</ul>
</dl>This, of course, is where responses from DNS server are processed and checked whether they contain the IP address we requested or if they contain authorative name server to which we should proceed.
<p>
If we received the IP address we requested, <a class="el" href="dns_8h.html#a5">DNS_EVENT_SUCCESS</a> is reported to application DNS event listener. Otherwise <a class="el" href="dns_8h.html#a4">DNS_EVENT_ERROR</a> is reported. 
<p>
Definition at line <a class="el" href="dns_8c-source.html#l00205">205</a> of file <a class="el" href="dns_8c-source.html">dns.c</a>.
<p>
References <a class="el" href="dns_8h-source.html#l00124">DNS_ERROR_GENERAL</a>, <a class="el" href="dns_8h-source.html#l00084">DNS_EVENT_ERROR</a>, <a class="el" href="dns_8h-source.html#l00087">DNS_EVENT_SUCCESS</a>, <a class="el" href="dns_8c-source.html#l00095">dns_hostptr</a>, <a class="el" href="dns_8c-source.html#l00142">dns_retransmit()</a>, <a class="el" href="dns_8c-source.html#l00089">dns_socket</a>, <a class="el" href="dns_8c-source.html#l00088">dns_state</a>, <a class="el" href="dns_8c-source.html#l00093">dns_tmp_ip</a>, <a class="el" href="system_8h-source.html#l00210">RECEIVE_NETWORK_B</a>, and <a class="el" href="tcp__ip_8h-source.html#l00276">UDP_EVENT_DATA</a>.
<p>
Referenced by <a class="el" href="dns_8c-source.html#l00108">dns_init()</a>.    </td>
  </tr>
</table>
<hr><address style="align: right;"><small>Generated on Sun Aug 3 20:33:00 2003 for OpenTCP by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
